# 2026-01-13 기능 업데이트 및 개선 계획

## 1. 목표
사용자의 요청에 따라 라이프 플래너 애플리케이션의 편의성을 개선하고 새로운 관리 기능을 추가합니다.
주요 목표는 **메모 전파 오류 수정**, **입력 편의성 증대**, **드래그 앤 드롭 구조 개선**, **메모장 페이지 추가**, **루틴/기념일 CSV 관리**입니다.

## 2. 구현 범위

### 2.1. 버그 수정: 메모 하위 시간대 전달 (Fix Memo Propagation)
- **현상**: 상위 시간대(예: 월간)에서 작성한 메모가 하위 시간대(예: 주간, 일간) 헤더에 표시되지 않음.
- **원인**: `getInheritedMemos` 함수 또는 UI 렌더링 로직에서 상속 체인 끊김 의심.
- **해결**: `usePlanStore.ts`의 `getInheritedMemos` 로직 검증 및 `FractalView`의 헤더 렌더링 부 수정.

### 2.2. UX 개선: 연속 입력 (Continuous Entry)
- **목표**: 할일/루틴 입력 후 엔터 키 입력 시, 바로 다음 항목을 입력할 수 있도록 포커스 유지 및 초기화.
- **구현**: `AddItemInput` 컴포넌트 개선 (포커스 유지 옵션 추가).

### 2.3. UX 개선: 드래그 앤 드롭 계층 구조 유지 (Nested DnD)
- **목표**: 상위 항목(부모)을 시간대 슬롯(Cell)으로 드래그 시, 하위 항목들도 함께 배정되고, **접었다 펴는(Dropdown-like)** 형태로 표시.
- **구현**:
    - `CellDraggableItem` 컴포넌트를 재귀적 구조 또는 접기/펼치기 지원 형태로 개선.
    - **기존 구현 활용**: `assignToSlot`의 기존 부모-자식 연결 로직은 그대로 유지하고, UI 렌더링(`CellDraggableItem`)에서 `parentId` 기준 그룹핑 및 접기/펼치기 기능만 추가합니다.

### 2.4. 신규 기능: 중요 메모장 (Notepad Page)
- **목표**: 라이프 플래너와 별도로 중요 내용을 기록할 수 있는 독립 페이지.
- **구현**:
    - `/notepad` 라우트 및 페이지 생성.
    - `NotepadView` 구현 (CRUD 지원).
    - 메인 헤더에 네비게이션 링크 추가.

### 2.5. 신규 기능: 루틴 & 기념일 CSV 관리
- **목표**: 루틴과 기념일 데이터를 CSV로 내보내고(양식 다운로드), CSV를 불러와서 일괄 등록.
- **구현**:
    - `src/lib/csvUtils.ts` 생성 (파싱/포매팅).
    - **위치 확정**: `/routines` 페이지 및 `/events` 페이지(또는 관련 모달)에 명시적인 관리 버튼 배치.

## 3. 기술 스택 및 의존성
- **Frontend**: Next.js, React, Tailwind CSS
- **State Management**: Zustand (usePlanStore)
- **Drag & Drop**: @dnd-kit/core
- **Utilities**: 표준 CSV 파싱 (보안 검증 포함)

## 4. 구현 단계 (Step-by-step)

### Step 1: 메모 전파 버그 수정
1. `src/store/usePlanStore.ts`의 `getInheritedMemos` 함수 로직 디버깅.
2. `src/views/FractalView.tsx` 헤더 영역에서 상속된 메모 렌더링 확인.
3. 테스트: 상위 레벨(YEAR) 메모 추가 -> 하위 레벨(MONTH)에서 확인.

### Step 2: 연속 입력 편의성 개선
1. `src/views/FractalView.tsx` 내 `AddItemInput` 컴포넌트 수정.
2. `onSubmit` 후 `inputRef.current.focus()` 강제 호출 로직 추가.
3. 테스트: 할일 입력 -> 엔터 -> 바로 다음 할일 입력 가능 여부 확인.

### Step 3: 드래그 앤 드롭 & 셀 렌더링 개선
1. `src/views/FractalView.tsx`의 `CellDraggableItem` 수정.
    - `isExpanded` 상태 추가.
    - 자식 아이템(같은 슬롯 내 `parentId`가 일치하는 항목) 필터링 및 렌더링 로직 추가.
2. `usePlanStore.ts`의 `assignToSlot` 로직 재확인 (기존 로직 활용).
3. 테스트: 하위 항목이 있는 루틴을 셀로 드래그 -> 셀 내에서 접기/펼치기 동작 확인.

### Step 4: 메모장 페이지 추가
1. `src/app/notepad/page.tsx` 생성.
2. `src/views/NotepadView.tsx` 생성 및 메모 CRUD 구현 (Local Storage 연동 권장).
3. `src/views/FractalView.tsx` 헤더에 '메모장' 버튼 추가.
4. 테스트: 페이지 이동, 메모 저장/삭제 확인.

### Step 5: CSV 관리 기능
1. `src/lib/csvUtils.ts` 작성 (JSON <-> CSV 변환).
2. **루틴 CSV**: `/routines` 페이지(또는 루틴 패널)에 '내보내기/불러오기' 버튼 추가.
3. **기념일 CSV**: `/events` 페이지(또는 기념일 설정 모달)에 '내보내기/불러오기' 버튼 추가.
4. 테스트: 샘플 CSV 다운로드 -> 내용 수정 -> 업로드 -> 데이터 반영 확인.

## 5. 예상 리스크 및 대응 방안
- **데이터 구조 복잡도**: 슬롯 데이터 평탄화 구조에서 `parentId` 기반 렌더링 성능 최적화 필요 (`React.memo` 활용).
- **CSV 파싱 오류**: 잘못된 형식 입력 시 예외 처리 및 안내.
- **[추가] CSV 보안**:
  - 입력값 sanitize (HTML 태그 제거).
  - 문자열 길이 제한 (title: 100자, note: 500자).
  - 필수 필드 유효성 검사 (month: 1-12, day: 1-31).
  - 잘못된 행은 건너뛰고 경고 표시.
- **[추가] 에러 피드백**:
  - 파싱 실패 시 토스트 알림으로 사용자에게 즉각 피드백.
  - 부분 성공 시 "N건 등록, M건 오류" 형식으로 상세 결과 표시.

## 6. 완료 기준 (Definition of Done)
- [ ] 상위 레벨 메모가 하위 레벨 뷰 헤더에 표시되어야 함.
- [ ] 할일 입력 후 엔터를 치면 입력창이 유지되고 포커스가 있어야 함.
- [ ] 하위 항목이 있는 그룹을 드래그하면 슬롯 내에서 그룹째로 이동하고 접었다 폈다 할 수 있어야 함 (기존 로직 활용).
- [ ] `/notepad` 페이지에서 독립적인 메모 관리가 가능해야 함.
- [ ] 루틴/기념일을 CSV로 다운로드하고 업로드하여 등록할 수 있어야 함 (보안 검증 포함).
---
## 🔍 클로드 코드 검증 결과
- 검증 일시: 2026-01-13 (현재)
- 검증 버전: v1

### ✅ 승인 항목
- **아키텍처 일관성**: 기존 프로젝트 구조(`src/lib/`, `src/views/`, `src/app/`)와 일관된 파일 배치 계획
- **기술 스택**: 이미 사용 중인 Next.js, Zustand, @dnd-kit 활용 - 적절함
- **구현 단계 순서**: 버그 수정 → UX 개선 → 신규 기능 순서로 논리적
- **완료 기준(DoD)**: 각 기능별 검증 가능한 체크리스트 존재
- **기존 코드 분석**: `getInheritedMemos` 함수가 `usePlanStore.ts:816-861`에 이미 구현되어 있음 확인. 부모 체인 순회 로직 정상 동작 추정, UI 렌더링 쪽 디버깅 우선 권장

### ⚠️ 보완 필요 항목
1. **Step 2.1 메모 전파 버그**
   - `getInheritedMemos` 함수는 이미 정상 구현되어 있음
   - 문제 원인이 "함수 로직"인지 "FractalView 렌더링"인지 명확화 필요
   - **수정 방향**: 디버깅 전 `FractalView.tsx`에서 `getInheritedMemos` 호출 여부 먼저 확인

2. **Step 2.5 CSV 관리 - UI 위치 불명확**
   - "루틴 관리 UI(현재 사이드바 하단 추정 혹은 별도 모달 필요)" → "추정"이 아닌 명확한 위치 지정 필요
   - **수정 방향**: 기존 `/routines` 페이지 또는 설정 모달 내 CSV 버튼 배치 확정

3. **에러 핸들링 구체화 부족**
   - CSV 파싱 오류 시 "예외 처리 필수"로만 언급됨
   - **수정 방향**: 구체적인 에러 메시지 및 사용자 피드백 방안 추가 (예: 토스트 알림, 유효성 검사 결과 표시)

### 🚨 반드시 수정 필요
1. **CSV 보안 검증 누락**
   - CSV 업로드 시 악성 데이터 주입 위험 (XSS, 특수문자)
   - **필수 추가 사항**:
     - CSV 파싱 후 각 필드 sanitize 처리
     - 허용 가능한 문자열 길이 제한
     - 필수 필드 유효성 검사 (month: 1-12, day: 1-31 등)

2. **드래그 앤 드롭 데이터 구조 검증**
   - 계획 2.3에서 "슬롯 데이터(`Item[]`)가 평탄화되어 있어 렌더링 시 재구성 필요"라고 명시
   - 그러나 `assignToSlot` 함수(`usePlanStore.ts:1243-1359`)에서 이미 부모-자식 관계 처리 중
   - **필수 확인**: 현재 구현과 충돌 여부 검토 후 계획 수정

### 💡 권장 사항 (Optional)
1. **단위 테스트 계획 추가**: 각 Step별 테스트 케이스는 있으나, 자동화 테스트 코드 작성 계획 부재. 최소한 `csvUtils.ts`에 대한 단위 테스트 권장

2. **메모장 데이터 저장소**: Local Storage 권장으로 명시했으나, 기존 Zustand persist 패턴(`usePlanStore.ts:2062-2071`)과 통합 고려

3. **기념일 CSV 포맷 명세**: 예시 CSV 양식을 계획 문서에 추가하면 구현 시 혼란 방지

---

🔍 검증 결과: **조건부 승인 ⚠️**

📝 피드백 위치: docs/workplans/20260113_feature_updates_plan.md 하단에 추가됨

---
## 🔍 클로드 코드 검증 결과
- 검증 일시: 2026-01-13
- 검증 버전: v2 (v1 피드백 반영 여부 확인)

### 📋 v1 지적사항 반영 현황

| 항목 | 상태 | 비고 |
|------|------|------|
| CSV 보안 검증 (sanitize, 길이제한, 유효성) | ❌ 미반영 | 5. 예상 리스크에 추가 필요 |
| CSV UI 위치 명확화 | ❌ 미반영 | Step 5에서 "추정" 표현 그대로 |
| 에러 핸들링 구체화 (토스트, 피드백) | ❌ 미반영 | 5. 예상 리스크에 추가 필요 |
| DnD 기존 구현 충돌 검토 | ❌ 미반영 | 2.3 구현 계획 수정 필요 |

### 🚨 v2 판정: 반려

**사유**: v1에서 "반드시 수정 필요"로 지적한 **CSV 보안 검증** 및 **DnD 데이터 구조 충돌** 항목이 계획서에 반영되지 않았습니다.

### 📝 수정 요청 사항

**1. 섹션 5 (예상 리스크) 수정안:**
```markdown
## 5. 예상 리스크 및 대응 방안
- **데이터 구조 복잡도**: (기존 내용 유지)
- **CSV 파싱 오류**: (기존 내용 유지)
- **[추가] CSV 보안**:
  - 입력값 sanitize (HTML 태그 제거)
  - 문자열 길이 제한 (title: 100자, note: 500자)
  - 필수 필드 유효성 검사 (month: 1-12, day: 1-31)
  - 잘못된 행은 건너뛰고 경고 표시
- **[추가] 에러 피드백**:
  - 파싱 실패 시 토스트 알림
  - 부분 성공 시 "N건 등록, M건 오류" 형식 표시
```

**2. 섹션 2.5 (Step 5) 수정안:**
```markdown
### Step 5: CSV 관리 기능
1. `src/lib/csvUtils.ts` 작성 (JSON <-> CSV 변환).
2. **루틴 CSV**: `/routines` 페이지에 '내보내기/불러오기' 버튼 추가.
3. **기념일 CSV**: `/events` 페이지에 '내보내기/불러오기' 버튼 추가.
4. 테스트: 샘플 CSV 다운로드 -> 내용 수정 -> 업로드 -> 데이터 반영 확인.
```

**3. 섹션 2.3 (DnD) 수정안:**
기존 `assignToSlot` 함수(`usePlanStore.ts:1243-1359`)가 이미 `parentId`/`childIds` 관계를 처리하고 있으므로, 계획서에 다음 내용 추가:
```markdown
- **기존 구현 활용**: `assignToSlot`의 부모-자식 연결 로직 유지, UI 렌더링(`CellDraggableItem`)에서 `parentId` 기준 그룹핑만 추가
```

---

🔍 검증 결과: **반려 ❌** (v1 필수 수정사항 미반영)

📝 피드백 위치: docs/workplans/20260113_feature_updates_plan.md 하단에 추가됨


---
# 2026-01-13 기능 업데이트 및 개선 계획 (v2)

## 1. 목표
사용자의 요청에 따라 라이프 플래너 애플리케이션의 편의성을 개선하고 새로운 관리 기능을 추가합니다.
주요 목표는 **메모 전파 오류 수정**, **입력 편의성 증대**, **드래그 앤 드롭 구조 개선**, **메모장 페이지 추가**, **루틴/기념일 CSV 관리**입니다.

## 2. 구현 범위

### 2.1. 버그 수정: 메모 하위 시간대 전달 (Fix Memo Propagation)
- **현상**: 상위 시간대(예: 월간)에서 작성한 메모가 하위 시간대(예: 주간, 일간) 헤더에 표시되지 않음.
- **원인**: `getInheritedMemos` 함수 또는 UI 렌더링 로직에서 상속 체인 끊김 의심.
- **해결**: `usePlanStore.ts`의 `getInheritedMemos` 로직 검증 및 `FractalView`의 헤더 렌더링 부 결과 확인 후 수정.

### 2.2. UX 개선: 연속 입력 (Continuous Entry)
- **목표**: 할일/루틴 입력 후 엔터 키 입력 시, 바로 다음 항목을 입력할 수 있도록 포커스 유지 및 초기화.
- **구현**: `AddItemInput` 컴포넌트 개선 (포커스 유지 옵션 추가).

### 2.3. UX 개선: 드래그 앤 드롭 계층 구조 유지 (Nested DnD)
- **목표**: 상위 항목(부모)을 시간대 슬롯(Cell)으로 드래그 시, 하위 항목들도 함께 배정되고, **접었다 펴는(Dropdown-like)** 형태로 표시.
- **구현**:
    - `CellDraggableItem` 컴포넌트를 재귀적 구조 또는 접기/펼치기 지원 형태로 개선.
    - **기존 구현 활용**: `assignToSlot`의 기존 부모-자식 연결 로직은 그대로 유지하고, UI 렌더링(`CellDraggableItem`)에서 `parentId` 기준 그룹핑 및 접기/펼치기 기능만 추가합니다.

### 2.4. 신규 기능: 중요 메모장 (Notepad Page)
- **목표**: 라이프 플래너와 별도로 중요 내용을 기록할 수 있는 독립 페이지.
- **구현**:
    - `/notepad` 라우트 및 페이지 생성.
    - `NotepadView` 구현 (CRUD 지원).
    - 메인 헤더에 네비게이션 링크 추가.

### 2.5. 신규 기능: 루틴 & 기념일 CSV 관리
- **목표**: 루틴과 기념일 데이터를 CSV로 내보내고(양식 다운로드), CSV를 불러와서 일괄 등록.
- **구현**:
    - `src/lib/csvUtils.ts` 생성 (파싱/포매팅).
    - **위치 확정**: `/routines` 페이지 및 `/events` 페이지(또는 관련 모달)에 명시적인 관리 버튼 배치.

## 3. 기술 스택 및 의존성
- **Frontend**: Next.js, React, Tailwind CSS
- **State Management**: Zustand (usePlanStore)
- **Drag & Drop**: @dnd-kit/core
- **Utilities**: Papaparse (필요 시 설치)

## 4. 구현 단계 (Step-by-step)

### Step 1: 메모 전파 버그 수정
1. `src/store/usePlanStore.ts`의 `getInheritedMemos` 함수 로직 디버깅.
2. `src/views/FractalView.tsx` 헤더 영역에서 상속된 메모 렌더링 확인.
3. 테스트: 상위 레벨(YEAR) 메모 추가 -> 하위 레벨(MONTH)에서 확인.

### Step 2: 연속 입력 편의성 개선
1. `src/views/FractalView.tsx` 내 `AddItemInput` 컴포넌트 수정.
2. `onSubmit` 후 `inputRef.current.focus()` 강제 호출 로직 추가.
3. 테스트: 할일 입력 -> 엔터 -> 바로 다음 할일 입력 가능 여부 확인.

### Step 3: 드래그 앤 드롭 & 셀 렌더링 개선
1. `src/views/FractalView.tsx`의 `CellDraggableItem` 수정.
    - `isExpanded` 상태 추가.
    - 자식 아이템(같은 슬롯 내 `parentId`가 일치하는 항목) 필터링 및 렌더링 로직 추가.
2. `usePlanStore.ts`의 `assignToSlot` 로직 확인 (필요시 데이터 구조 보강).
3. 테스트: 하위 항목이 있는 루틴을 셀로 드래그 -> 셀 내에서 접기/펼치기 동작 확인.

### Step 4: 메모장 페이지 추가
1. `src/app/notepad/page.tsx` 생성.
2. `src/views/NotepadView.tsx` 생성 및 메모 CRUD 구현 (Local Storage 연동 권장).
3. `src/views/FractalView.tsx` 헤더에 '메모장' 버튼 추가.
4. 테스트: 페이지 이동, 메모 저장/삭제 확인.

### Step 5: CSV 관리 기능
1. `src/lib/csvUtils.ts` 작성 (JSON <-> CSV 변환).
2. **루틴 CSV**: `/routines` 페이지에 '내보내기/불러오기' 버튼 추가.
3. **기념일 CSV**: `/events` 페이지에 '내보내기/불러오기' 버튼 추가.
4. 테스트: 샘플 CSV 다운로드 -> 내용 수정 -> 업로드 -> 데이터 반영 확인.

## 5. 예상 리스크 및 대응 방안
- **데이터 구조 복잡도**: 슬롯 내에서 계층 구조(부모-자식)를 표현할 때, 슬롯 데이터(`Item[]`)가 평탄화(flat)되어 있는지 트리 구조인지 확인 필요.
- **CSV 파싱 오류**: 사용자 입력 CSV 포맷이 잘못되었을 경우 예외 처리 필수.
- **[추가] CSV 보안**:
  - 입력값 sanitize (HTML 태그 제거)
  - 문자열 길이 제한 (title: 100자, note: 500자)
  - 필수 필드 유효성 검사 (month: 1-12, day: 1-31)
  - 잘못된 행은 건너뛰고 경고 표시
- **[추가] 에러 피드백**:
  - 파싱 실패 시 토스트 알림
  - 부분 성공 시 "N건 등록, M건 오류" 형식 표시

## 6. 완료 기준 (Definition of Done)
- [ ] 상위 레벨 메모가 하위 레벨 뷰 헤더에 표시되어야 함.
- [ ] 할일 입력 후 엔터를 치면 입력창이 유지되고 포커스가 있어야 함.
- [ ] 하위 항목이 있는 그룹을 드래그하면 슬롯 내에서 그룹째로 이동하고 접었다 폈다 할 수 있어야 함 (기존 로직 활용).
- [ ] `/notepad` 페이지에서 독립적인 메모 관리가 가능해야 함.
- [ ] 루틴/기념일을 CSV로 다운로드하고 업로드하여 등록할 수 있어야 함 (보안 검증 및 에러 핸들링 포함).

---
## 🔍 클로드 코드 검증 결과
- 검증 일시: 2026-01-13
- 검증 버전: v3 (최종 검증)

### 📋 v1/v2 지적사항 반영 현황

| 항목 | 상태 | 반영 위치 |
|------|------|-----------|
| CSV 보안 검증 (sanitize, 길이제한, 유효성) | ✅ 반영됨 | 섹션 5 (77-81줄) |
| CSV UI 위치 명확화 | ✅ 반영됨 | 섹션 2.5 (35줄), Step 5 (70-71줄) |
| 에러 핸들링 구체화 (토스트, 피드백) | ✅ 반영됨 | 섹션 5 (82-84줄) |
| DnD 기존 구현 활용 명시 | ✅ 반영됨 | 섹션 2.3 (22줄), Step 3 (59줄) |

### ✅ 최종 승인 항목
- **아키텍처 일관성**: 기존 프로젝트 구조와 일관된 파일 배치 확인
- **기술 스택**: Next.js, Zustand, @dnd-kit 활용 - 적절함
- **구현 단계 순서**: 버그 수정 → UX 개선 → 신규 기능 순서로 논리적
- **보안**: CSV 입력 검증 (sanitize, 길이제한, 유효성 검사) 명시됨
- **예외 처리**: 토스트 알림, 부분 성공 피드백 방안 명시됨
- **테스트 가능성**: 각 Step별 검증 가능한 테스트 케이스 존재
- **기존 코드 활용**: `assignToSlot` 로직 재사용 방침 명확화됨

### 💡 권장 사항 (선택적 개선)
1. **CSV 양식 예시**: 문서에 샘플 CSV 포맷 추가 권장 (구현 시 혼란 방지)
2. **단위 테스트**: `csvUtils.ts` 함수에 대한 자동화 테스트 코드 작성 권장
3. **메모장 저장소**: Zustand persist 패턴과 통합 고려 (일관된 데이터 관리)

---

🔍 검증 결과: **승인 ✅**

📝 피드백 위치: docs/workplans/20260113_feature_updates_plan.md 하단에 추가됨

---
## 🔍 코드 검증 결과: usePlanStore.ts
- 검증 일시: 2026-01-13
- 검증 대상: `toggleExpand` 함수 수정사항
- 관련 계획: Step 3 (드래그 앤 드롭 & 셀 렌더링 개선)

### 📋 검증 체크리스트

| 항목 | 결과 | 비고 |
|------|------|------|
| 계획 준수 여부 | ✅ | Step 3 요구사항 "슬롯 내 접기/펼치기" 구현됨 |
| 코딩 컨벤션 | ✅ | camelCase, 2 spaces 들여쓰기 준수 |
| 보안 | ✅ | 외부 입력 처리 없음, 보안 이슈 없음 |
| 중복 | ✅ | `toggler` 함수 재사용으로 중복 최소화 |
| 에러 핸들링 | ✅ | `period` 없을 때 early return 처리 |
| 성능 | ✅ | 불필요한 연산 없음 |

### ⚠️ 발견된 문제

**1. 타입 정의 불일치 (653줄 vs 1652줄)**

```typescript
// 인터페이스 정의 (653줄)
toggleExpand: (itemId: string, location: 'todo' | 'routine' | 'slot', slotId?: string) => void;

// 구현 (1652줄) - 'timeslot' 케이스 처리 중
else if (location === 'timeslot' && slotId) { ... }
```

- **문제**: `location` 타입에 `'timeslot'`이 없지만 구현에서는 처리하고 있음
- **영향**: TypeScript 컴파일 에러 발생 가능, 런타임에서 `'timeslot'` 전달 시 타입 체크 실패
- **수정 방안**:
  ```typescript
  // 인터페이스 수정 (653줄)
  toggleExpand: (itemId: string, location: 'todo' | 'routine' | 'slot' | 'timeslot', slotId?: string) => void;
  ```

### ✅ 승인 항목
- **기능 구현**: 슬롯 내 아이템 접기/펼치기 로직 정상 구현
- **코드 품질**: toggler 함수 분리로 재사용성 확보
- **안전성**: null/undefined 체크 적절히 수행 (`period.timeSlots?.[tsId]`)

### 💡 권장 사항
1. **타입 통일**: `location` 파라미터를 별도 타입으로 추출하여 일관성 유지
   ```typescript
   type ItemLocation = 'todo' | 'routine' | 'slot' | 'timeslot';
   ```

---

🔍 코드 검증 결과: **조건부 승인 ⚠️** (타입 정의 수정 필요)

📝 피드백 위치: docs/workplans/20260113_feature_updates_plan.md 하단에 추가됨

---
## 🔍 코드 검증 결과: usePlanStore.ts (v2)
- 검증 일시: 2026-01-13
- 검증 대상: 이전 지적사항 수정 확인

### 📋 이전 지적사항 반영 현황

| 항목 | 상태 | 비고 |
|------|------|------|
| 타입 정의 불일치 (653줄) | ✅ 수정됨 | `'timeslot'` 추가 완료 |

### ✅ 수정 확인

**변경 전 (653줄):**
```typescript
toggleExpand: (itemId: string, location: 'todo' | 'routine' | 'slot', slotId?: string) => void;
```

**변경 후 (653줄):**
```typescript
toggleExpand: (itemId: string, location: 'todo' | 'routine' | 'slot' | 'timeslot', slotId?: string) => void;
```

### ✅ 최종 승인 항목
- **타입 일관성**: 인터페이스 정의와 구현이 일치함
- **기능 완성도**: 슬롯/타임슬롯 내 접기/펼치기 기능 정상 구현
- **계획 준수**: Step 3 요구사항 충족

---

🔍 코드 검증 결과: **승인 ✅**

📁 피드백 위치: docs/workplans/20260113_feature_updates_plan.md 하단

👉 다음 행동:
- Step 3 (드래그 앤 드롭 & 셀 렌더링 개선) 구현 완료
- 다음 Step 진행 가능
